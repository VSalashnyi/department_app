{"code":"!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t){function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);\"function\"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){a(e,t,n[t])})}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o,r,d;window.onload=function(){fetch(\"http://www.mocky.io/v2/5c2ce2ee2e00004e06e877f1\").then(function(e){return e.json()}).then(function(e){null===JSON.parse(sessionStorage.getItem(\"state\"))?p(e):p(JSON.parse(sessionStorage.getItem(\"state\")))})};var p=function(e){o=e,s(e),m(window.location.pathname)},i=function(e){var t=e.employees;if(0===t.length)return 0;var n=t.map(function(e){return e.salary}).reduce(function(e,t){return t+e});return Math.round(n/t.length)},l=function(e){window.history.pushState({},e,e)},m=function(e){w[e]?w[e]():(r=o.filter(function(t){return t.id===+e.substring(1)})[0],u())},c=function(e){$(\"#app\").html('<div class=\"jumbotron\"><h1 class=\"display-4\">'+e+\"</h1></div>\")},s=function(e){$(\"nav\").empty(),e.forEach(function(e){h(e.department_title,\"btn btn-secondary m-3\",\"nav\",function(){return t=e.id,l(t),void m(window.location.pathname);var t})}),h(\"Add new department\",\"btn btn-success m-3\",\"nav\",function(){l(\"/add-department\"),m(window.location.pathname)})},u=function(){if(void 0===r)$(\"#app\").html(\"This page does not exist\");else{var e=$(\"<div/>\").addClass(\"jumbotron\");$(\"<h3/>\").addClass(\"display-4 d-inline\").text(r.department_title).appendTo(e),h(\"Delete department\",\"btn btn-danger ml-5 mb-3\",e,function(){o=o.filter(function(e){return e!==r}),s(o),o.length?(l(o[o.length-1].id),m(window.location.pathname)):(l(\"no-dep\"),m(\"/no-dep\"))}),h(\"Edit department\",\"btn btn-warning ml-5 mb-3\",e,function(){l(\"edit-department\"),m(window.location.pathname)}),$(\"<p/>\").html(\"Head of department - <b>\"+r.head+\"</b>\").appendTo(e),$(\"<p/>\").html(\"Average salary : \"+i(r)).appendTo(e),$(\"<p/>\").html(\"Total salary : \"+(t=r,n=t.employees,n.map(function(e){return e.salary}).length?n.map(function(e){return e.salary}).reduce(function(e,t){return t+e}):0)).appendTo(e),$(\"<p/>\").html(function(){var e=0,t=\"<p>Employees with salary lower than average in the department:<ul>\";if(r.employees.forEach(function(n){n.salary<i(r)&&(t+=\"<li>\".concat(n.firstName,\" \").concat(n.secondName,\"</li>\"),e++)}),t+=\"</ul></p>\",e)return t}()).appendTo(e),$(\"<hr/>\").appendTo(e),$(\"<p/>\").html(r.description).appendTo(e),$(\"<h4/>\").html(\"Employees:\").appendTo(e),f(r).appendTo(e),h(\"Add New Employee\",\"btn btn-success\",e,function(){l(\"add-employee\"),m(window.location.pathname)}),$(\"#app\").html(e)}var t,n},f=function(e){var t=e.employees,n=$(\"<table/>\").addClass(\"table\");return 0===t.length?n.append(\"You have not any employees\"):t.forEach(function(e){n.append(y(e))}),n},y=function(e){var t=$(\"<tr>\");return $(\"<td>\").html(e.firstName).appendTo(t),$(\"<td>\").html(e.secondName).appendTo(t),$(\"<td>\").html(e.date).appendTo(t),$(\"<td>\").html(e.salary).appendTo(t),h(\"Delete\",\"btn btn-danger\",t,function(){o=o.map(function(t){return t===r?n({},t,{employees:t.employees.filter(function(t){if(t!==e)return t})}):t}),m(window.location.pathname)}),h(\"Edit\",\"btn btn-warning mr-2\",t,function(){d=e,l(\"edit-employee\"),m(window.location.pathname)}),t},h=function(e,t,n,a){var o=$(\"<button/>\").text(e).addClass(t).click(a);$(n).append($(o))},v=function(e,t,n,a,o){var r=$(\"<div/>\");return $(\"<label/>\").attr(\"for\",e).text(t).appendTo(r),$(\"<input/>\").attr(\"id\",e).attr(\"placeholder\",n).attr(\"type\",a).addClass(\"form-control\").appendTo(r),r.appendTo(o)},_=function(){var e,t,n,a,o,r,d=$(\"<div/>\").addClass(\"jumbotron w-50 m-auto\"),p=$(\"<form/>\").appendTo(d);v(\"dep_name\",\"Department label\",\"Enter the name of department...\",\"text\",p),v(\"dep_head_name\",\"Department head name:\",\"Enter the name of the head of department...\",\"text\",p),e=\"dep_description\",t=\"Department description:\",n=\"Enter the department description...\",a=\"text\",o=p,r=$(\"<div/>\"),$(\"<label/>\").attr(\"for\",e).text(t).appendTo(r),$(\"<textarea/>\").attr(\"id\",e).attr(\"placeholder\",n).attr(\"type\",a).addClass(\"form-control\").appendTo(r),r.appendTo(o),$(\"#app\").html(d)},b=function(){var e=$(\"<div/>\").addClass(\"jumbotron w-50 m-auto\"),t=$(\"<form/>\").appendTo(e);v(\"employee_first_name\",\"Employee first name\",\"Enter employee first name...\",\"text\",t),v(\"employee_second_name\",\"Employee second name:\",\"Enter employee second name...\",\"text\",t),v(\"employee_date\",\"Employee birth date:\",\"Enter employee's date of birth...\",\"date\",t),v(\"employee_salary\",\"Employee salary:\",\"Enter employee's salary...\",\"number\",t),$(\"#app\").html(e)};window.onpopstate=function(){m(window.location.pathname)},window.onbeforeunload=function(){sessionStorage.setItem(\"state\",JSON.stringify(o))};var w={\"/\":function(){return c(\"Choose department you are interesting in, or add your own.\")},\"/no-dep\":function(){return c(\"No department left. Add new department.\")},\"/add-employee\":function(){b(),h(\"Add New Employee\",\"btn btn-secondary float-right mt-3\",\"form\",function(){o=o.map(function(e){return e===r?(e.employees.push({id:e.employees.length?e.employees[e.employees.length-1].id+1:1,firstName:$(\"#employee_first_name\").val(),secondName:$(\"#employee_second_name\").val(),date:$(\"#employee_date\").val(),salary:+$(\"#employee_salary\").val()}),e):e}),$(\"#dep_name, #dep_head_name, #dep_description\").val(\"\"),l(r.id),m(window.location.pathname)})},\"/edit-employee\":function(){b(),$(\"#employee_first_name\").val(d.firstName),$(\"#employee_second_name\").val(d.secondName),$(\"#employee_date\").val(d.date),$(\"#employee_salary\").val(d.salary),h(\"Edit employee\",\"btn btn-secondary float-right mt-3\",\"form\",function(){o=o.map(function(e){return e===r?n({},e,{employees:e.employees.map(function(e){return e.id===d.id?{id:e.id,firstName:$(\"#employee_first_name\").val(),secondName:$(\"#employee_second_name\").val(),date:$(\"#employee_date\").val(),salary:+$(\"#employee_salary\").val()}:e})}):e}),$(\"#dep_name, #dep_head_name, #dep_description\").val(\"\"),l(r.id),m(window.location.pathname)})},\"/add-department\":function(){_(),h(\"Add new department\",\"btn btn-secondary float-right mt-2\",\"form\",function(){o.push({id:o.length?o[o.length-1].id+1:1,department_title:$(\"#dep_name\").val(),description:$(\"#dep_description\").val(),head:$(\"#dep_head_name\").val(),employees:[]}),$(\"#dep_name, #dep_head_name, #dep_description\").val(\"\"),s(o),l(o[o.length-1].id),m(window.location.pathname)})},\"/edit-department\":function(){_(),$(\"#dep_name\").val(r.department_title),$(\"#dep_head_name\").val(r.head),$(\"#dep_description\").val(r.description),h(\"Edit department\",\"btn btn-secondary float-right mt-2\",\"form\",function(){o=o.map(function(e){return e===r?{id:e.id,department_title:$(\"#dep_name\").val(),head:$(\"#dep_head_name\").val(),description:$(\"#dep_description\").val(),employees:e.employees}:e}),$(\"#dep_name, #dep_head_name, #dep_description\").val(\"\"),s(o),l(r.id),m(window.location.pathname)})}}}]);","extractedComments":[]}